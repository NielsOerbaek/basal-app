{% extends 'core/base.html' %}
{% load crispy_forms_tags %}

{% block title %}{% if object %}Rediger{% else %}Tilføj{% endif %} skole - Basal{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1><i class="bi bi-building me-2"></i>{% if object %}Rediger skole{% else %}Tilføj skole{% endif %}</h1>
</div>

<div class="card">
    <div class="card-body">
        <form method="post">
            {% csrf_token %}
            {% crispy form %}
            <div class="d-flex gap-2 mt-3">
                <button type="submit" class="btn btn-primary">Gem skole</button>
                {% if object %}
                <a href="{% url 'schools:detail' object.pk %}" class="btn btn-outline-secondary">Annuller</a>
                {% else %}
                <a href="{% url 'schools:list' %}" class="btn btn-outline-secondary">Annuller</a>
                {% endif %}
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const kommunenBetalerCheckbox = document.getElementById('id_kommunen_betaler');
    const billingFields = document.getElementById('billing-fields');

    function toggleBillingFields() {
        if (kommunenBetalerCheckbox && billingFields) {
            billingFields.style.display = kommunenBetalerCheckbox.checked ? 'block' : 'none';
        }
    }

    // Initial state
    toggleBillingFields();

    // Listen for changes
    if (kommunenBetalerCheckbox) {
        kommunenBetalerCheckbox.addEventListener('change', toggleBillingFields);
    }
});
</script>
{% endblock %}
